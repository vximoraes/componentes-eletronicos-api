# Plano de Teste para Model (Sprint 4)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Cadastro de localizacao         | Só pode ser cadastrada se possuir nome único e obrigatório                            | Tentar salvar sem `nome` ou com nome já existente                   | A operação deve falhar com erro de validação (`required`) ou de unicidade (`unique`)                |
| Cadastro válido                 | Localização com nome único e válido deve ser salva com sucesso                        | Inserir localização com nome válido                                 | A localização é salva e retornada com `_id`                                                          |
| Leitura de localizações         | O sistema deve retornar todas as localizações cadastradas                             | Fazer find() e verificar leitura dos dados inseridos                | A resposta contém um array com as localizações cadastradas                                           |
| Atualização de localizacao      | Deve ser possível atualizar o nome de uma localização válida                          | Atualizar localização existente com novo nome                       | O nome da localização é alterado corretamente                                                        |
| Proibição de nome duplicado     | Não deve ser possível atualizar ou cadastrar localização com nome já existente         | Tentar cadastrar/atualizar localização com nome já existente        | A operação deve falhar com erro de unicidade                                                        |
| Remoção de localizacao          | Uma localização existente pode ser removida do sistema, exceto se vinculada a componentes | Fazer deleteOne() / findByIdAndDelete() | A localização é removida e não aparece mais na listagem, exceto se houver vínculo com componentes   |
| Proibição de remoção com vínculo| Não deve ser possível remover localização vinculada a componentes                     | Tentar remover localização vinculada a componentes                  | A operação deve falhar com erro de recurso em uso                                                   |
| Localizacao inexistente         | Deve retornar erro ao buscar, atualizar ou deletar localização inexistente             | Buscar, atualizar ou deletar localização com id inexistente         | Deve retornar erro 404 para localização não encontrada                                              |
| Falha inesperada                | Deve retornar erro 500 para falhas inesperadas                                        | Simular erro inesperado em qualquer operação                       | Deve retornar erro 500 e mensagem padronizada                                                      |

# Plano de Teste Controller (Sprint 4)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Validação de schema             | Deve validar o schema de entrada (nome obrigatório)                                   | Enviar requisição com dados inválidos                               | Deve retornar erro 400 para dados inválidos                                                         |
| Nome já cadastrado              | Não deve permitir cadastro com nome já existente                                      | Enviar requisição com nome já cadastrado                            | Deve retornar erro 409 para nome já cadastrado                                                      |
| Localização não encontrada      | Deve retornar erro ao buscar, atualizar ou deletar localização inexistente            | Buscar, atualizar ou deletar localização inexistente                | Deve retornar erro 404 para localização não encontrada                                              |
| Resposta limpa                  | Não deve retornar campos desnecessários nas respostas                                 | Cadastrar, listar, atualizar localização                           | A resposta não contém campos sensíveis ou desnecessários                                            |
| Mensagens padronizadas          | Mensagens de sucesso e erro devem ser claras e padronizadas                           | Realizar operações de sucesso e erro                                | Mensagens seguem o padrão definido                                                                  |
| Dados inválidos no cadastro     | Deve retornar erro 400 ao tentar cadastrar localização com dados ausentes ou inválidos | Enviar requisição sem nome                                          | Deve retornar erro 400 para dados inválidos                                                         |
| Atualização proibida            | Deve retornar erro ao tentar atualizar nome para um já existente                      | Tentar atualizar nome para um já existente                          | Deve retornar erro ou ignorar alteração, mantendo valores originais                                 |
| Falha inesperada                | Deve retornar erro 500 para falhas inesperadas no controller                          | Simular erro inesperado em qualquer operação                        | Deve retornar erro 500 e mensagem padronizada                                                       |
| Busca com filtro inválido       | Deve retornar erro 400 ao buscar localizações com filtros inválidos                   | Buscar localizações com query inválida                              | Deve retornar erro 400 para filtros inválidos                                                       |
| Remoção de localização inexistente| Deve retornar erro 404 ao tentar remover localização inexistente                     | Tentar deletar localização com id inexistente                       | Deve retornar erro 404 para localização não encontrada                                              |

# Plano de Teste Service (Sprint 4)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Cadastro de localizacao         | Deve cadastrar localização com nome único e obrigatório                               | Cadastrar localização com nome válido                               | Localização salva e retornada com `_id`                                                             |
| Proibição de nome duplicado     | Deve lançar erro ao tentar cadastrar/atualizar localização com nome já existente      | Cadastrar/atualizar localização com nome já existente               | Deve lançar erro de unicidade                                                                        |
| Localizacao inexistente         | Deve lançar erro ao tentar atualizar ou deletar localização inexistente               | Atualizar ou deletar localização inexistente                        | Deve lançar erro 404                                                                                |
| Remoção com vínculo             | Deve lançar erro ao tentar remover localização vinculada a componentes                | Tentar remover localização vinculada a componentes                  | Deve lançar erro de recurso em uso                                                                   |
| Falha inesperada do repository  | Deve lançar erro se o repository lançar exceção em qualquer operação                  | Simular erro lançado pelo repository                               | Deve lançar erro e não comprometer a integridade dos dados                                          |
| Update com nome proibido        | Deve ignorar alterações para nome já existente                                        | Tentar atualizar nome para um já existente                          | Nome permanece inalterado após a operação                                                           |

# Plano de Teste Repository (Sprint 4)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Buscar por nome                 | Deve buscar localização por nome corretamente                                         | Buscar localização pelo campo `nome`                                | Retorna a localização correta                                                                        |
| Buscar por id                   | Deve buscar localização por id corretamente                                           | Buscar localização pelo campo `_id`                                 | Retorna a localização correta                                                                        |
| Aplicar filtros de busca        | Deve aplicar filtros de busca (nome)                                                  | Buscar localizações com diferentes filtros                          | Retorna apenas as localizações que atendem aos filtros                                              |
| Impedir remoção com vínculo     | Deve impedir remoção de localização vinculada a componentes                           | Tentar remover localização vinculada a componentes                  | A operação deve falhar com erro de recurso em uso                                                   |
| Erro para operações inválidas   | Deve retornar erro apropriado para operações inválidas                                | Buscar, atualizar ou deletar localização inexistente                | Deve retornar erro 404 para localização não encontrada                                              |
| Buscar por nome inexistente     | Deve retornar null ou erro ao buscar localização por nome inexistente                 | Buscar localização com nome não cadastrado                          | Retorna null ou erro apropriado                                                                     |
| Buscar por id inexistente       | Deve retornar null ou erro ao buscar localização por id inexistente                   | Buscar localização com id não cadastrado                            | Retorna null ou erro apropriado                                                                     |
| Remoção de localização inexistente| Deve lançar erro ao tentar remover localização inexistente                           | Tentar deletar localização com id inexistente                       | Deve lançar erro 404                                                                                |
| Erro inesperado do banco        | Deve lançar erro se o banco lançar exceção em qualquer operação                       | Simular falha do banco de dados                                    | Deve lançar erro e não comprometer a integridade dos dados                                          |

# Plano de Teste Endpoints (Sprint 6)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Listar localizações             | Deve retornar todas as localizações via GET /localizacoes                             | Fazer requisição GET /localizacoes                                  | Resposta contém array com as localizações cadastradas                                              |
| Buscar localização por id       | Deve retornar a localização correta via GET /localizacoes/:id                         | Fazer requisição GET /localizacoes/:id                              | Retorna a localização correta ou erro 404 se não encontrada                                        |
| Cadastrar localização           | Deve cadastrar localização via POST /localizacoes                                     | Fazer POST /localizacoes com dados válidos                          | Localização cadastrada e retornada com _id                                                         |
| Cadastro inválido               | Não deve cadastrar localização com dados inválidos via POST /localizacoes             | Fazer POST /localizacoes sem nome ou com nome duplicado              | Retorna erro 400 ou 409 conforme o caso                                                            |
| Atualizar localização           | Deve atualizar localização via PUT /localizacoes/:id                                  | Fazer PUT /localizacoes/:id com novo nome                           | Nome da localização alterado corretamente                                                          |
| Atualização inválida            | Não deve atualizar localização com nome duplicado ou inexistente via PUT /localizacoes/:id | Fazer PUT /localizacoes/:id com nome duplicado ou id inexistente  | Retorna erro 404 ou 409 conforme o caso                                                            |
| Remover localização             | Deve remover localização via DELETE /localizacoes/:id                                 | Fazer DELETE /localizacoes/:id                                      | Localização removida, exceto se vinculada a componentes                                           |
| Remoção proibida                | Não deve remover localização vinculada a componentes via DELETE /localizacoes/:id      | Fazer DELETE /localizacoes/:id vinculada a componentes              | Retorna erro de recurso em uso                                                                      |
| Filtros de busca                | Deve aplicar filtros via query params em GET /localizacoes                            | Fazer GET /localizacoes?nome=...                                    | Retorna apenas localizações que atendem ao filtro                                                  |
| Erro inesperado                 | Deve retornar erro 500 para falhas inesperadas nas rotas                              | Simular erro inesperado em qualquer rota                            | Retorna erro 500 e mensagem padronizada                                                            |