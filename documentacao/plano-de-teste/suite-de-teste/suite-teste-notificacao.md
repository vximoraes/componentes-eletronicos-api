# Plano de Teste para Model (Sprint 4)

| Funcionalidade                        | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Cadastro de notificação               | Só pode ser cadastrada com mensagem, usuário válido e visualizada padrão false        | Tentar salvar sem campos obrigatórios ou com usuário inexistente     | Deve falhar com erro de validação (`required`) ou referência inválida (`invalidReference`)          |
| Cadastro válido                       | Notificação com todos os campos obrigatórios e válidos deve ser salva com sucesso      | Inserir notificação com todos os campos preenchidos corretamente     | Notificação salva, retornando `_id`, `visualizada` como `false` e datas válidas                     |
| Visualizada padrão                    | Ao cadastrar sem informar `visualizada`, valor padrão deve ser `false`                | Cadastrar sem o campo `visualizada`                                | Campo `visualizada` deve estar como `false` no documento salvo                                     |
| Leitura de notificações               | Deve retornar todas as notificações cadastradas, com filtros por usuário e visualizada | Fazer find() e verificar leitura/filtro dos dados inseridos          | Resposta contém array com notificações filtradas corretamente                                      |
| Paginação                             | Deve ser possível paginar notificações                                               | Buscar notificações com parâmetros de página e limite               | Retorna docs, totalDocs, page, etc., conforme paginação                                            |
| Atualização de visualização           | Deve ser possível marcar notificação como visualizada                                 | Atualizar campo `visualizada` e `dataLeitura`                       | Campo `visualizada` passa para `true` e `dataLeitura` é preenchido                                 |
| Busca por não visualizadas            | Deve ser possível buscar notificações não visualizadas                                | Buscar notificações com `visualizada: false`                        | Retorna apenas notificações não visualizadas                                                        |
| Proibição de cadastro com usuário inválido | Não deve ser possível cadastrar notificação com usuário inexistente               | Tentar cadastrar com usuário inválido                               | Deve falhar com erro de referência inválida                                                         |
| Proibição de cadastro com tipos errados| Não deve ser possível cadastrar notificação com tipos errados                         | Tentar cadastrar com tipos errados (ex: mensagem numérica)           | Deve converter ou falhar conforme regra de negócio                                                  |
| Notificação inexistente               | Deve retornar erro ao buscar ou atualizar notificação inexistente                     | Buscar ou atualizar notificação com id inexistente                   | Deve retornar erro 404 para notificação não encontrada                                               |
| Falha inesperada                      | Deve retornar erro 500 para falhas inesperadas                                        | Simular erro inesperado em qualquer operação                        | Deve retornar erro 500 e mensagem padronizada                                                      |

# Plano de Teste Controller Notificacao (Sprint 4)

| Funcionalidade                        | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Validação de schema                   | Deve validar o schema de entrada (campos obrigatórios)                                | Enviar requisição com dados inválidos                               | Deve retornar erro 400 para dados inválidos                                                         |
| Usuário inexistente                   | Não deve permitir cadastro com usuário inexistente                                    | Enviar requisição com usuário inexistente                           | Deve retornar erro 400 para usuário inválido                                                        |
| Notificação não encontrada            | Deve retornar erro ao buscar ou atualizar notificação inexistente                     | Buscar ou atualizar notificação inexistente                         | Deve retornar erro 404 para notificação não encontrada                                              |
| Mensagens padronizadas                | Mensagens de sucesso e erro devem ser claras e padronizadas                           | Realizar operações de sucesso e erro                                | Mensagens seguem o padrão definido                                                                  |
| Dados inválidos no cadastro           | Deve retornar erro 400 ao tentar cadastrar notificação com dados ausentes ou inválidos | Enviar requisição sem campos obrigatórios                           | Deve retornar erro 400 para dados inválidos                                                         |
| Falha inesperada                      | Deve retornar erro 500 para falhas inesperadas no controller                          | Simular erro inesperado em qualquer operação                        | Deve retornar erro 500 e mensagem padronizada                                                       |
| Busca com filtro inválido             | Deve retornar erro 400 ao buscar notificações com filtros inválidos                   | Buscar notificações com query inválida                              | Deve retornar erro 400 para filtros inválidos                                                       |

# Plano de Teste Service (Sprint 4)

| Funcionalidade                        | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Cadastro de notificação               | Deve cadastrar notificação com todos os campos obrigatórios e válidos                 | Cadastrar notificação com dados válidos                             | Notificação salva e retornada com `_id` e `visualizada` como `false`                                |
| Proibição de cadastro com usuário inválido | Deve lançar erro ao tentar cadastrar notificação com usuário inexistente           | Cadastrar notificação com usuário inexistente                       | Deve lançar erro 400 ou customizado                                                                 |
| Proibição de cadastro com tipos errados| Deve lançar erro ao tentar cadastrar notificação com tipos errados                   | Cadastrar notificação com tipos errados (ex: mensagem numérica)      | Deve lançar erro de validação ou converter conforme regra                                           |
| Notificação inexistente               | Deve lançar erro ao tentar buscar ou atualizar notificação inexistente               | Buscar ou atualizar notificação com id inexistente                   | Deve lançar erro 404                                                                                |
| Falha inesperada do repository        | Deve lançar erro se o repository lançar exceção em qualquer operação                | Simular erro lançado pelo repository                                | Deve lançar erro e não comprometer a integridade dos dados                                          |
| Update com dados inválidos            | Deve lançar erro ao tentar atualizar notificação com dados inválidos                 | Atualizar notificação com dados inválidos                            | Deve lançar erro de validação                                                                       |

# Plano de Teste Repository (Sprint 4)

| Funcionalidade                        | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Buscar por usuário                    | Deve buscar notificações por usuário corretamente                                     | Buscar notificações pelo campo `usuario`                            | Retorna as notificações corretas para o usuário                                                     |
| Buscar por id                         | Deve buscar notificação por id corretamente                                           | Buscar notificação pelo campo `_id`                                 | Retorna a notificação correta                                                                        |
| Aplicar filtros de busca              | Deve aplicar filtros de busca (visualizada, data, usuário)                            | Buscar notificações com diferentes filtros                          | Retorna apenas as notificações que atendem aos filtros                                              |
| Paginação                             | Deve retornar notificações paginadas corretamente                                     | Buscar notificações com parâmetros de página e limite               | Retorna docs, totalDocs, page, etc., conforme paginação                                             |
| Cadastro com usuário inexistente       | Deve lançar erro ao tentar cadastrar notificação com usuário inexistente              | Cadastrar notificação com usuário inexistente                       | Deve lançar erro customizado                                                                         |
| Cadastro com tipos errados            | Deve converter ou lançar erro ao tentar cadastrar notificação com tipos errados       | Cadastrar notificação com tipos errados (ex: mensagem numérica)      | Deve converter ou lançar erro de validação conforme regra                                           |
| Notificação inexistente               | Deve lançar erro ao tentar buscar ou atualizar notificação inexistente                | Buscar ou atualizar notificação com id inexistente                   | Deve lançar erro 404                                                                                |

# Plano de Teste Endpoints (Sprint 6)

| Funcionalidade                        | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Listar notificações                   | Deve retornar todas as notificações via GET /notificacoes                             | Fazer requisição GET /notificacoes                                  | Resposta contém array com as notificações cadastradas                                              |
| Buscar notificação por id             | Deve retornar a notificação correta via GET /notificacoes/:id                         | Fazer requisição GET /notificacoes/:id                              | Retorna a notificação correta ou erro 404 se não encontrada                                        |
| Cadastrar notificação                 | Deve cadastrar notificação via POST /notificacoes                                     | Fazer POST /notificacoes com dados válidos                          | Notificação cadastrada e retornada com _id                                                         |
| Cadastro inválido                     | Não deve cadastrar notificação com dados inválidos via POST /notificacoes             | Fazer POST /notificacoes sem campos obrigatórios ou inválidos        | Retorna erro 400 ou 409 conforme o caso                                                            |
| Atualizar notificação                 | Deve atualizar notificação via PUT /notificacoes/:id                                  | Fazer PUT /notificacoes/:id com dados válidos                       | Dados da notificação alterados corretamente                                                        |
| Atualização proibida                  | Não deve atualizar campos restritos via PUT /notificacoes/:id                         | Fazer PUT /notificacoes/:id tentando alterar campos restritos        | Campos restritos permanecem inalterados                                                            |
| Remover notificação                   | Deve remover notificação via DELETE /notificacoes/:id                                 | Fazer DELETE /notificacoes/:id                                      | Notificação removida                                                                               |
| Notificação inexistente               | Deve retornar erro ao buscar, atualizar ou deletar notificação inexistente            | Fazer GET/PUT/DELETE /notificacoes/:id com id inexistente           | Retorna erro 404 para notificação não encontrada                                                   |
| Filtros de busca                      | Deve aplicar filtros via query params em GET /notificacoes                            | Fazer GET /notificacoes?visualizada=false                           | Retorna apenas notificações que atendem ao filtro                                                  |
| Erro inesperado                       | Deve retornar erro 500 para falhas inesperadas nas rotas                              | Simular erro inesperado em qualquer rota                            | Retorna erro 500 e mensagem padronizada                                                            |