# Plano de Teste para Model (Sprint 4)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Cadastro de componente          | Um componente só pode ser cadastrado se possuir nome único, quantidade, estoque mínimo, valor unitário, categoria e localização válidos | Tentar salvar componente sem campos obrigatórios ou com nome já existente | A operação deve falhar com erro de validação (`required`) ou de unicidade (`unique`)                |
| Cadastro válido                 | Um componente com todos os campos obrigatórios e válidos deve ser salvo com sucesso   | Inserir um componente com todos os campos preenchidos corretamente   | O componente é salvo e retornado com `_id` e `ativo` padrão como `false`                            |
| Valor padrão ativo              | Ao cadastrar um componente sem informar `ativo`, o valor padrão deve ser `false`      | Cadastrar componente sem o campo `ativo`                           | O campo `ativo` deve estar como `false` no documento salvo                                         |
| Leitura de componentes          | O sistema deve retornar todos os componentes cadastrados                              | Fazer find() e verificar leitura dos dados inseridos                | A resposta contém um array com os componentes cadastrados                                           |
| Atualização de componente       | Deve ser possível atualizar informações de um componente válido, exceto quantidade    | Fazer updateOne() / findByIdAndUpdate()                            | O componente deve refletir os dados alterados, exceto `quantidade`                                 |
| Proibição de update quantidade  | Não deve ser possível alterar a quantidade diretamente                                | Tentar atualizar o campo `quantidade`                              | O campo `quantidade` permanece inalterado após a operação                                          |
| Remoção de componente           | Um componente existente pode ser removido do sistema, exceto se vinculado a movimentações | Fazer deleteOne() / findByIdAndDelete()                        | O componente é removido e não aparece mais na listagem, exceto se houver vínculo com movimentações |
| Proibição de remoção com vínculo| Não deve ser possível remover componente vinculado a movimentações                    | Tentar remover componente vinculado a movimentações                 | A operação deve falhar com erro de recurso em uso                                                   |
| Categoria/localização obrigatória| Não deve ser possível cadastrar componente com categoria ou localização inexistente   | Tentar cadastrar componente com categoria/localização inválida      | Deve falhar com erro de validação                                                                   |
| Componente inexistente          | Deve retornar erro ao buscar, atualizar ou deletar componente inexistente             | Buscar, atualizar ou deletar componente com id inexistente          | Deve retornar erro 404 para componente não encontrado                                               |
| Falha inesperada                | Deve retornar erro 500 para falhas inesperadas                                        | Simular erro inesperado em qualquer operação                       | Deve retornar erro 500 e mensagem padronizada                                                      |

# Plano de Teste Controller (Sprint 4)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Validação de schema             | Deve validar o schema de entrada (campos obrigatórios)                                | Enviar requisição com dados inválidos                               | Deve retornar erro 400 para dados inválidos                                                         |
| Nome já cadastrado              | Não deve permitir cadastro com nome já existente                                      | Enviar requisição com nome já cadastrado                            | Deve retornar erro 409 para nome já cadastrado                                                      |
| Componente não encontrado       | Deve retornar erro ao buscar, atualizar ou deletar componente inexistente             | Buscar, atualizar ou deletar componente inexistente                 | Deve retornar erro 404 para componente não encontrado                                               |
| Resposta limpa                  | Não deve retornar campos desnecessários nas respostas                                 | Cadastrar, listar, atualizar componente                            | A resposta não contém campos sensíveis ou desnecessários                                            |
| Mensagens padronizadas          | Mensagens de sucesso e erro devem ser claras e padronizadas                           | Realizar operações de sucesso e erro                                | Mensagens seguem o padrão definido                                                                  |
| Dados inválidos no cadastro     | Deve retornar erro 400 ao tentar cadastrar componente com dados ausentes ou inválidos  | Enviar requisição sem campos obrigatórios                           | Deve retornar erro 400 para dados inválidos                                                         |
| Atualização proibida            | Deve retornar erro ao tentar atualizar quantidade diretamente                          | Tentar atualizar campo `quantidade`                                 | Deve retornar erro ou ignorar alteração, mantendo valor original                                    |
| Falha inesperada                | Deve retornar erro 500 para falhas inesperadas no controller                          | Simular erro inesperado em qualquer operação                        | Deve retornar erro 500 e mensagem padronizada                                                       |
| Busca com filtro inválido       | Deve retornar erro 400 ao buscar componentes com filtros inválidos                     | Buscar componentes com query inválida                               | Deve retornar erro 400 para filtros inválidos                                                       |
| Remoção de componente inexistente| Deve retornar erro 404 ao tentar remover componente inexistente                       | Tentar deletar componente com id inexistente                        | Deve retornar erro 404 para componente não encontrado                                               |

# Plano de Teste Service (Sprint 4)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Cadastro de componente          | Deve cadastrar componente com campos obrigatórios e válidos                           | Cadastrar componente com dados válidos                              | Componente salvo e retornado com `_id`                                                              |
| Proibição de nome duplicado     | Deve lançar erro ao tentar cadastrar/atualizar componente com nome já existente       | Cadastrar/atualizar componente com nome já existente                | Deve lançar erro de unicidade                                                                        |
| Componente inexistente          | Deve lançar erro ao tentar atualizar ou deletar componente inexistente                | Atualizar ou deletar componente inexistente                         | Deve lançar erro 404                                                                                |
| Remoção com vínculo             | Deve lançar erro ao tentar remover componente vinculado a movimentações               | Tentar remover componente vinculado a movimentações                 | Deve lançar erro de recurso em uso                                                                   |
| Categoria/localização obrigatória| Deve lançar erro ao cadastrar componente com categoria/localização inexistente        | Cadastrar componente com categoria/localização inválida             | Deve lançar erro de validação                                                                       |
| Falha inesperada do repository  | Deve lançar erro se o repository lançar exceção em qualquer operação                  | Simular erro lançado pelo repository                               | Deve lançar erro e não comprometer a integridade dos dados                                          |
| Update com quantidade proibida  | Deve ignorar alterações para quantidade mesmo se enviada no update                    | Tentar atualizar campo `quantidade` via update                      | Quantidade permanece inalterada após a operação                                                      |

# Plano de Teste Repository (Sprint 4)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Buscar por nome                 | Deve buscar componente por nome corretamente                                          | Buscar componente pelo campo `nome`                                 | Retorna o componente correto                                                                        |
| Buscar por id                   | Deve buscar componente por id corretamente                                            | Buscar componente pelo campo `_id`                                  | Retorna o componente correto                                                                        |
| Aplicar filtros de busca        | Deve aplicar filtros de busca (nome, quantidade, estoque_minimo, categoria, localizacao, ativo) | Buscar componentes com diferentes filtros                | Retorna apenas os componentes que atendem aos filtros                                              |
| Impedir remoção com vínculo     | Deve impedir remoção de componente vinculado a movimentações                         | Tentar remover componente vinculado a movimentações                 | A operação deve falhar com erro de recurso em uso                                                   |
| Erro para operações inválidas   | Deve retornar erro apropriado para operações inválidas                                | Buscar, atualizar ou deletar componente inexistente                 | Deve retornar erro 404 para componente não encontrado                                               |
| Buscar por nome inexistente     | Deve retornar null ou erro ao buscar componente por nome inexistente                  | Buscar componente com nome não cadastrado                           | Retorna null ou erro apropriado                                                                     |
| Buscar por id inexistente       | Deve retornar null ou erro ao buscar componente por id inexistente                    | Buscar componente com id não cadastrado                             | Retorna null ou erro apropriado                                                                     |
| Remoção de componente inexistente| Deve lançar erro ao tentar remover componente inexistente                            | Tentar deletar componente com id inexistente                        | Deve lançar erro 404                                                                                |

# Plano de Teste Endpoints (Sprint 6)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Listar componentes              | Deve retornar todos os componentes via GET /componentes                               | Fazer requisição GET /componentes                                   | Resposta contém array com os componentes cadastrados                                               |
| Buscar componente por id        | Deve retornar o componente correto via GET /componentes/:id                           | Fazer requisição GET /componentes/:id                               | Retorna o componente correto ou erro 404 se não encontrado                                         |
| Cadastrar componente            | Deve cadastrar componente via POST /componentes                                       | Fazer POST /componentes com dados válidos                           | Componente cadastrado e retornado com _id                                                          |
| Cadastro inválido               | Não deve cadastrar componente com dados inválidos via POST /componentes               | Fazer POST /componentes sem campos obrigatórios ou duplicados        | Retorna erro 400 ou 409 conforme o caso                                                            |
| Atualizar componente            | Deve atualizar componente via PUT /componentes/:id                                    | Fazer PUT /componentes/:id com dados válidos                        | Dados do componente alterados corretamente                                                         |
| Atualização proibida            | Não deve atualizar quantidade via PUT /componentes/:id                                | Fazer PUT /componentes/:id tentando alterar quantidade               | Campo quantidade permanece inalterado                                                              |
| Remover componente              | Deve remover componente via DELETE /componentes/:id                                   | Fazer DELETE /componentes/:id                                       | Componente removido, exceto se vinculado a movimentações                                          |
| Remoção proibida                | Não deve remover componente vinculado a movimentações via DELETE /componentes/:id     | Fazer DELETE /componentes/:id vinculado a movimentações             | Retorna erro de recurso em uso                                                                      |
| Filtros de busca                | Deve aplicar filtros via query params em GET /componentes                             | Fazer GET /componentes?nome=...                                     | Retorna apenas componentes que atendem ao filtro                                                   |
| Erro inesperado                 | Deve retornar erro 500 para falhas inesperadas nas rotas                              | Simular erro inesperado em qualquer rota                            | Retorna erro 500 e mensagem padronizada                                                            |