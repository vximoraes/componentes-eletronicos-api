# Plano de Teste para Model (Sprint 4)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Cadastro de fornecedor          | Um fornecedor só pode ser cadastrado se possuir nome único e obrigatório              | Tentar salvar fornecedor sem `nome` ou com nome já existente         | A operação deve falhar com erro de validação (`required`) ou de unicidade (`unique`)                |
| Cadastro válido                 | Um fornecedor com nome único e válido deve ser salvo com sucesso                      | Inserir um fornecedor com nome válido                               | O fornecedor é salvo e retornado com `_id`                                                           |
| Leitura de fornecedores         | O sistema deve retornar todos os fornecedores cadastrados                             | Fazer find() e verificar leitura dos dados inseridos                | A resposta contém um array com os fornecedores cadastrados                                           |
| Atualização de fornecedor       | Deve ser possível atualizar o nome de um fornecedor válido                            | Atualizar fornecedor existente com novo nome                        | O nome do fornecedor é alterado corretamente                                                         |
| Proibição de nome duplicado     | Não deve ser possível atualizar ou cadastrar fornecedor com nome já existente         | Tentar cadastrar/atualizar fornecedor com nome já existente         | A operação deve falhar com erro de unicidade                                                        |
| Remoção de fornecedor           | Um fornecedor existente pode ser removido do sistema, exceto se vinculado a componentes ou orçamentos | Fazer deleteOne() / findByIdAndDelete() | O fornecedor é removido e não aparece mais na listagem, exceto se houver vínculo com componentes/orçamentos |
| Proibição de remoção com vínculo| Não deve ser possível remover fornecedor vinculado a componentes ou orçamentos        | Tentar remover fornecedor vinculado a componentes/orçamentos        | A operação deve falhar com erro de recurso em uso                                                   |
| Fornecedor inexistente          | Deve retornar erro ao buscar, atualizar ou deletar fornecedor inexistente             | Buscar, atualizar ou deletar fornecedor com id inexistente          | Deve retornar erro 404 para fornecedor não encontrado                                               |
| Falha inesperada                | Deve retornar erro 500 para falhas inesperadas                                        | Simular erro inesperado em qualquer operação                       | Deve retornar erro 500 e mensagem padronizada                                                      |

# Plano de Teste Controller (Sprint 4)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Validação de schema             | Deve validar o schema de entrada (nome obrigatório)                                   | Enviar requisição com dados inválidos                               | Deve retornar erro 400 para dados inválidos                                                         |
| Nome já cadastrado              | Não deve permitir cadastro com nome já existente                                      | Enviar requisição com nome já cadastrado                            | Deve retornar erro 409 para nome já cadastrado                                                      |
| Fornecedor não encontrado       | Deve retornar erro ao buscar, atualizar ou deletar fornecedor inexistente             | Buscar, atualizar ou deletar fornecedor inexistente                 | Deve retornar erro 404 para fornecedor não encontrado                                               |
| Resposta limpa                  | Não deve retornar campos desnecessários nas respostas                                 | Cadastrar, listar, atualizar fornecedor                            | A resposta não contém campos sensíveis ou desnecessários                                            |
| Mensagens padronizadas          | Mensagens de sucesso e erro devem ser claras e padronizadas                           | Realizar operações de sucesso e erro                                | Mensagens seguem o padrão definido                                                                  |
| Dados inválidos no cadastro     | Deve retornar erro 400 ao tentar cadastrar fornecedor com dados ausentes ou inválidos  | Enviar requisição sem nome                                          | Deve retornar erro 400 para dados inválidos                                                         |
| Atualização proibida            | Deve retornar erro ao tentar atualizar nome para um já existente                      | Tentar atualizar nome para um já existente                          | Deve retornar erro ou ignorar alteração, mantendo valores originais                                 |
| Falha inesperada                | Deve retornar erro 500 para falhas inesperadas no controller                          | Simular erro inesperado em qualquer operação                        | Deve retornar erro 500 e mensagem padronizada                                                       |
| Busca com filtro inválido       | Deve retornar erro 400 ao buscar fornecedores com filtros inválidos                   | Buscar fornecedores com query inválida                              | Deve retornar erro 400 para filtros inválidos                                                       |
| Remoção de fornecedor inexistente| Deve retornar erro 404 ao tentar remover fornecedor inexistente                       | Tentar deletar fornecedor com id inexistente                        | Deve retornar erro 404 para fornecedor não encontrado                                               |

# Plano de Teste Service (Sprint 4)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Cadastro de fornecedor          | Deve cadastrar fornecedor com nome único e obrigatório                                | Cadastrar fornecedor com nome válido                                | Fornecedor salvo e retornado com `_id`                                                              |
| Proibição de nome duplicado     | Deve lançar erro ao tentar cadastrar/atualizar fornecedor com nome já existente       | Cadastrar/atualizar fornecedor com nome já existente                | Deve lançar erro de unicidade                                                                        |
| Fornecedor inexistente          | Deve lançar erro ao tentar atualizar ou deletar fornecedor inexistente                | Atualizar ou deletar fornecedor inexistente                         | Deve lançar erro 404                                                                                |
| Remoção com vínculo             | Deve lançar erro ao tentar remover fornecedor vinculado a componentes/orçamentos      | Tentar remover fornecedor vinculado a componentes/orçamentos        | Deve lançar erro de recurso em uso                                                                   |
| Falha inesperada do repository  | Deve lançar erro se o repository lançar exceção em qualquer operação                  | Simular erro lançado pelo repository                               | Deve lançar erro e não comprometer a integridade dos dados                                          |
| Update com nome proibido        | Deve ignorar alterações para nome já existente                                        | Tentar atualizar nome para um já existente                          | Nome permanece inalterado após a operação                                                           |

# Plano de Teste Repository (Sprint 4)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Buscar por nome                 | Deve buscar fornecedor por nome corretamente                                          | Buscar fornecedor pelo campo `nome`                                 | Retorna o fornecedor correto                                                                         |
| Buscar por id                   | Deve buscar fornecedor por id corretamente                                            | Buscar fornecedor pelo campo `_id`                                  | Retorna o fornecedor correto                                                                         |
| Aplicar filtros de busca        | Deve aplicar filtros de busca (nome)                                                  | Buscar fornecedores com diferentes filtros                          | Retorna apenas os fornecedores que atendem aos filtros                                              |
| Impedir remoção com vínculo     | Deve impedir remoção de fornecedor vinculado a componentes/orçamentos                | Tentar remover fornecedor vinculado a componentes/orçamentos        | A operação deve falhar com erro de recurso em uso                                                   |
| Erro para operações inválidas   | Deve retornar erro apropriado para operações inválidas                                | Buscar, atualizar ou deletar fornecedor inexistente                 | Deve retornar erro 404 para fornecedor não encontrado                                               |
| Buscar por nome inexistente     | Deve retornar null ou erro ao buscar fornecedor por nome inexistente                  | Buscar fornecedor com nome não cadastrado                           | Retorna null ou erro apropriado                                                                     |
| Buscar por id inexistente       | Deve retornar null ou erro ao buscar fornecedor por id inexistente                    | Buscar fornecedor com id não cadastrado                             | Retorna null ou erro apropriado                                                                     |
| Remoção de fornecedor inexistente| Deve lançar erro ao tentar remover fornecedor inexistente                            | Tentar deletar fornecedor com id inexistente                        | Deve lançar erro 404                                                                                |
| Erro inesperado do banco        | Deve lançar erro se o banco lançar exceção em qualquer operação                       | Simular falha do banco de dados                                    | Deve lançar erro e não comprometer a integridade dos dados                                          |

# Plano de Teste Endpoints (Sprint 6)

| Funcionalidade                  | Comportamento Esperado                                                                 | Verificações                                                        | Critérios de Aceite                                                                                 |
|---------------------------------|--------------------------------------------------------------------------------------|---------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Listar fornecedores             | Deve retornar todos os fornecedores via GET /fornecedores                             | Fazer requisição GET /fornecedores                                  | Resposta contém array com os fornecedores cadastrados                                              |
| Buscar fornecedor por id        | Deve retornar o fornecedor correto via GET /fornecedores/:id                          | Fazer requisição GET /fornecedores/:id                              | Retorna o fornecedor correto ou erro 404 se não encontrado                                         |
| Cadastrar fornecedor            | Deve cadastrar fornecedor via POST /fornecedores                                      | Fazer POST /fornecedores com dados válidos                          | Fornecedor cadastrado e retornado com _id                                                          |
| Cadastro inválido               | Não deve cadastrar fornecedor com dados inválidos via POST /fornecedores              | Fazer POST /fornecedores sem nome ou com nome duplicado              | Retorna erro 400 ou 409 conforme o caso                                                            |
| Atualizar fornecedor            | Deve atualizar fornecedor via PUT /fornecedores/:id                                   | Fazer PUT /fornecedores/:id com novo nome                           | Nome do fornecedor alterado corretamente                                                           |
| Atualização inválida            | Não deve atualizar fornecedor com nome duplicado ou inexistente via PUT /fornecedores/:id | Fazer PUT /fornecedores/:id com nome duplicado ou id inexistente  | Retorna erro 404 ou 409 conforme o caso                                                            |
| Remover fornecedor              | Deve remover fornecedor via DELETE /fornecedores/:id                                  | Fazer DELETE /fornecedores/:id                                      | Fornecedor removido, exceto se vinculado a componentes/orçamentos                                 |
| Remoção proibida                | Não deve remover fornecedor vinculado a componentes/orçamentos via DELETE /fornecedores/:id | Fazer DELETE /fornecedores/:id vinculado a componentes/orçamentos | Retorna erro de recurso em uso                                                                      |
| Filtros de busca                | Deve aplicar filtros via query params em GET /fornecedores                            | Fazer GET /fornecedores?nome=...                                    | Retorna apenas fornecedores que atendem ao filtro                                                  |
| Erro inesperado                 | Deve retornar erro 500 para falhas inesperadas nas rotas                              | Simular erro inesperado em qualquer rota                            | Retorna erro 500 e mensagem padronizada                                                            |